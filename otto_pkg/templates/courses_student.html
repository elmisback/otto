{% extends 'base.html' %}

{% block body %}

<div class="page-header">
    <h1>Courses <button type="button" class="btn btn-success pull-right" data-toggle="modal" data-target="#joinCourseModal">Join Course</button></h1>
</div><!-- .page-header -->
<div class="panel panel-default">
    <div class="panel-heading">
        <div class="row">
            <div class="col-xs-2">ID</div>
            <div class="col-xs-4">Course Name</div>
            <div class="col-xs-2">Instructor</div>
            <div class="col-xs-2">Status</div>
            <div class="col-xs-1">Assignments</div>
        </div><!-- .row -->
    </div><!-- .panel-heading -->
    <div class="list-group course-list">
        {% for course in courses %}
            <div class="list-group-item course" id="course-{{ course.course_id }}">
                <div class="row">
                    <div class="col-xs-2 attr-course-id">
                        <div>{{ course.course_id }}</div>
                    </div><!-- .attr-course-id -->
                    <div class="col-xs-4 attr-course-name">
                        <a href="{{ course.course_url }}" title="{{ course.course_title }}">{{ course.course_title }}</a>
                    </div><!-- .attr-course-name -->
                    <div class="col-xs-2 attr-course-instructor">
                        {{ course.course_instructors }}
                    </div><!-- .attr-course-instructor -->
                    <div class="col-xs-2 attr-course-status">
                        {{ course.course_status }}
                    </div><!-- .attr-course-status -->
                    <div class="col-xs-1 attr-course-assignments">
                        {{ course.course_assignments }}
                    </div><!-- .attr-course-due -->
                    <div class="col-xs-1 attr-course-delete">
                        <button type="submit" class="close" aria-label="Close" data-toggle="modal" data-target="#leaveCourseModal"><span aria-hidden="true">&times;</span></button>
                    </div><!-- .attr-course-delete -->
                </div><!-- .row -->
            </div><!-- .list-group-item .course -->
        {% endfor %}
        <div class="list-group-item course course-none">
            <div class="row">
                <div class="col-xs-2 attr-course-id"></div>
                <div class="col-xs-4 attr-course-name">
                    <span class="text-muted">You are not enrolled in any courses. <a href="#" data-toggle="modal" data-target="#joinCourseModal">Join a course</a></span>
                </div>
                <div class="col-xs-2 attr-course-instructor"></div>
                <div class="col-xs-2 attr-course-status"></div>
                <div class="col-xs-1 attr-course-assignments"></div>
                <div class="col-xs-1 attr-course-delete">
                    <button type="submit" class="close" aria-label="Close" data-toggle="modal" data-target="#leaveCourseModal"><span aria-hidden="true">&times;</span></button>
                </div>
            </div><!-- .row -->
        </div><!-- .list-group-item .course -->
    </div><!-- .list-group -->
</div><!-- .panel .panel-default -->

<div class="modal fade" id="joinCourseModal" tabindex="-1" role="dialog" aria-labelledby="joinCourseModal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form method="post" action="/courses">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Create Course</h4>
                </div><!-- .modal-header -->
                <div class="modal-body">
                    <div class="form-group">
                        <label for="course_id">Course ID</label>
                        <input name="course_id" type="text" class="form-control" placeholder="e.g. 6153198786" required>
                    </div><!-- .form-group -->
                    {% csrf_token %}
                    <input name="action" type="hidden" value="joinCourse">
                    <input name="ajax" type="hidden">
                </div><!-- .modal-body -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success" data-loading-text="Joining...">Join Course</button>
                </div><!-- .modal-footer -->
            </form>
        </div><!-- .modal-content -->
    </div><!-- .model-dialog -->
</div><!-- .modal -->

<div class="modal fade" id="leaveCourseModal" tabindex="-1" role="dialog" aria-labelledby="leaveCourseModal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form method="post" action="/courses">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Confirm Leave Course</h4>
                </div><!-- .modal-header -->
                <div class="modal-body">
                    <p>You are about to discard all submissions and comments on <span class="course-title text-danger">this course</span>.</p>
                    {% csrf_token %}
                    <input name="action" type="hidden" value="leaveCourse">
                    <input name="course_id" type="hidden">
                    <input name="ajax" type="hidden">
                </div><!-- .modal-body -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-danger" data-loading-text="Leaving...">Leave Course</button>
                </div><!-- .modal-footer -->
            </form>
        </div><!-- .modal-content -->
    </div><!-- .model-dialog -->
</div><!-- .modal -->

{% endblock %}