{% extends 'base.html' %}

{% block body %}

<div class="page-header">
    <h1>{{ course.course_title }} <button type="button" class="btn btn-success pull-right" data-toggle="modal" data-target="#createNewCourseModal">Create Assignment</button></h1>
</div><!-- .page-header -->
<div class="panel panel-default">
    <div class="panel-heading">
        <div class="row">
            <div class="col-xs-2">ID</div>
            <div class="col-xs-5">Course Name</div>
            <div class="col-xs-2">Enrolled Students</div>
            <div class="col-xs-2">Pending Approval</div>
        </div><!-- .row -->
    </div><!-- .panel-heading -->
    <div class="list-group course-list">
        {% if courses %}
            {% for course in courses %}
            <div class="list-group-item course" id="course-{{ course.id_str }}">
                <div class="row">
                    <div class="col-xs-2 attr-course-id">
                        <!-- div for easier double click selection -->
                        <div>{{ course.id_str }}</div>
                    </div><!-- .attr-course-id -->
                    <div class="col-xs-5 attr-course-name">
                        <a href="#" title="{{ course.title }}">{{ course.title }}</a>
                    </div><!-- .attr-course-name -->
                    <div class="col-xs-2 attr-course-enrolled">
                        {{ course.students|length|default:0 }}
                    </div><!-- .attr-course-enrolled -->
                    <div class="col-xs-2 attr-course-pending">
                        0
                    </div><!-- .attr-course-pending -->
                    <div class="col-xs-1 attr-course-remove">
                        <button type="submit" class="close course-remove" aria-label="Close" data-toggle="modal" data-target="#deleteCourseModal" data-course-id="{{ course.id_str }}"><span aria-hidden="true">&times;</span></button>
                    </div><!-- .attr-course-remove -->
                </div><!-- .row -->
            </div><!-- .list-group-item .course -->
            {% endfor %}
        {% endif %}
        <div class="list-group-item course course-none {% if courses %}hidden{% endif %}">
            <div class="row">
                <div class="col-xs-2 attr-course-id"></div>
                <div class="col-xs-5 attr-course-name">
                    <span class="text-muted">You are not currently instructing any courses. <a href="#" data-toggle="modal" data-target="#createNewCourseModal">Create new course</a></span>
                </div>
                <div class="col-xs-2 attr-course-enrolled"></div>
                <div class="col-xs-2 attr-course-pending"></div>
                <div class="col-xs-1 attr-course-remove hidden">
                    <button type="submit" class="close" aria-label="Close" data-toggle="modal" data-target="#deleteCourseModal"><span aria-hidden="true">&times;</span></button>
                </div>
            </div><!-- .row -->
        </div><!-- .list-group-item .course -->
    </div><!-- .list-group -->
</div><!-- .panel .panel-default -->

<div class="modal fade" id="createNewCourseModal" tabindex="-1" role="dialog" aria-labelledby="createNewCourseModal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form id="createNewCourseForm" method="post" action="/courses">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Create New Course</h4>
                </div><!-- .modal-header -->
                <div class="modal-body">
                    <div class="form-group">
                        <label for="course_title">Course Name</label>
                        <input name="course_title" type="text" class="form-control" placeholder="e.g. Data Structures" required>
                    </div>
                </div><!-- .modal-body -->
                <div class="modal-footer">
                    {% csrf_token %}
                    <input name="action" type="hidden" value="addCourse">
                    <input type="hidden" name="ajax">
                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success" data-loading-text="Creating...">Create Course</button>
                </div><!-- .modal-footer -->
            </form>
        </div><!-- .modal-content -->
    </div><!-- .model-dialog -->
</div><!-- .modal -->

<div class="modal fade" id="deleteCourseModal" tabindex="-1" role="dialog" aria-labelledby="deleteCourseModal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form id="deleteCourseForm" method="post" action="/courses">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Confirm Delete Course</h4>
                </div><!-- .modal-header -->
                <div class="modal-body">
                    <p><span class="course-title text-danger">This course</span> and all of its associated data will be permanently deleted. There is no way to undo this action.</p>
                </div><!-- .modal-body -->
                <div class="modal-footer">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="removeCourse">
                    <input type="hidden" name="course_id">
                    <input type="hidden" name="ajax">
                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-danger" data-loading-text="Removing...">Delete Course</button>
                </div><!-- .modal-footer -->
            </form>
        </div><!-- .modal-content -->
    </div><!-- .model-dialog -->
</div><!-- .modal -->

{% endblock %}